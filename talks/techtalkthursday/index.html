<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Gitception @ TechTalkThursday</title>
    <link rel="stylesheet" href="./css/reveal.css" />
    <link rel="stylesheet" href="./css/theme/league.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/zenburn.css" />
    <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">

# Gitception

a different approach to learning Git

<aside class="notes"><ul>
<li>I want to make this a fun experience for all of us!</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Agenda

* Whois
* Gitception?
* Applying the concept
  - Git objects
  - Git branches
</script></section><section ><section data-markdown><script type="text/template">
## Who am I?

![Pablo](pablo.png)<!-- .element: height="300px" width="300px" -->

<aside class="notes"><ul>
<li>Work as a Software Engineer for DECTRIS</li>
<li>I also help organizations and individuals understanding Git</li>
<li>Today I want to present one of the concepts I use in my workshops</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
## Who is Coders Only?

![Coders Only](codersonly.png)<!-- .element: height="300px" width="300px" -->

<aside class="notes"><ul>
<li>Association which promotes concepts and methods out of the field of software development within Switzerland</li>
<li>Coders Only organizes events like the<ul>
<li>Coders Monthly</li>
<li>Global day of Coderetreat</li>
<li>SoCraTes Day Switzerland</li>
</ul>
</li>
<li>Visit our website or contact us if you want to become a member or support us</li>
</ul>
</aside></script></section></section><section ><section data-markdown><script type="text/template">
## What is Gitception?

Gitception is the idea of putting your Git repository in a Git repository to see what Git does when Git is used.
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>I was asked to give a full day introduction to Git for a CAS</li>
<li>I prepared a training trying to add something useful for several levels of Git knowledge</li>
<li>The intended audience was PhD students with basic to no Git experience and technicians</li>
<li>I learned a lot while preparing the training</li>
<li>The training was very successful, receiving a lot of good feedback</li>
<li>The concept of Gitception was considered a power move</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
![Git](why.jpg)<!-- .element: height="500px" -->
</script></section><section data-markdown><script type="text/template">
![Git](https://imgs.xkcd.com/comics/git_2x.png)<!-- .element: height="500px" -->

<aside class="notes"><ul>
<li>Roughly 1/20 of the participants of my trainings just want to know &quot;How to use Git&quot;</li>
<li>One of the major problems of Git is its user&#39;s interaction, which has close to no abstraction</li>
<li>Some people compare Git to a Henry Ford Model T: If you don&#39;t know the mechanics, you won&#39;t be able to use it very long</li>
<li>I found that knowing &quot;How Git works&quot; is a much better approach for this technology (Git is Shit)</li>
<li>...and Gitception empowers you to find &quot;How Git works&quot; by yourself!</li>
</ul>
</aside></script></section></section><section  data-markdown><script type="text/template">
# Gitception
## in practice

<aside class="notes"><ul>
<li>Enough talking</li>
<li>Let&#39;s see how it works!</li>
<li>Don&#39;t need to type the commands, for a real workshop, join the Coders Only Git series</li>
</ul>
</aside></script></section><section ><section data-markdown><script type="text/template">
##  Setup
</script></section><section data-markdown><script type="text/template">
### Create a repository

```shell
$ mkdir -p ~/working/directory/ && cd $_ && git init .
Initialized empty Git repository in ~/working/directory/.git/
```
<!-- .element: class="fragment" -->

<!-- git config user.name "Pablo Escodebar"
 -->
<!-- git config user.email "escodebar@gmail.com"
 -->

```shell
$ ls -blah
total 0
drwxr-xr-x 3 pablo.verges dectris  60 Jun  2 10:42 .
drwx------ 3 pablo.verges dectris  60 Jun  2 10:42 ..
drwxr-xr-x 7 pablo.verges dectris 200 Jun  2 10:42 .git
```
<!-- .element: class="fragment" -->

See that `.git` folder there? That's the repository.
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>Besides of some information, everything is stored in the <code>.git</code> folder</li>
<li>During my trainings, we are confronted with typical Git situations</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Create a repository in the repository's repository

```shell
$ cd ~/working/directory/.git
```
<!-- .element: class="fragment" -->

```shell
$ git init .
Initialized empty Git repository in ~/working/directory/.git/.git/
```
<!-- .element: class="fragment" style="font-size: 0.53em" -->
<!-- git config user.name "Pablo Escodebar"
 -->
<!-- git config user.email "escodebar@gmail.com"
 -->


```shell
$ git add -A && git commit -m "Add the repository"
[master (root-commit) 4b17b8a] Add the repository
 15 files changed, 653 insertions(+)
 create mode 100644 HEAD
 create mode 100644 config
 create mode 100644 description
 create mode 100755 hooks/applypatch-msg.sample
 [...]
 create mode 100755 hooks/update.sample
 create mode 100644 info/exclude
```
<!-- .element: class="fragment" style="font-size: 0.535em" -->

<aside class="notes"><ul>
<li>This is for educational purpose only</li>
<li>Git keeps track of all the changes, it is therefore a perfect analysis tool</li>
<li>Most Git commands go up the directory path to the point where they find a <code>.git</code> folder, but &quot;ignore&quot; its contents</li>
<li>Therefore we can create a repository in the repository to track the changes and understand Git&#39;s behavior</li>
<li>I haven&#39;t seen an other Git training doing this! Let me know if you like this idea!</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
![Gitception](https://i.imgflip.com/2f33xj.jpg)

<aside class="notes"><ul>
<li>Xzibit shows up on every slide which uses the repository in the repository to set you in the right context</li>
</ul>
</aside></script></section></section><section ><section data-markdown><script type="text/template">
## Git objects

<aside class="notes"><ul>
<li>One of the first things we discuss during my trainings are Git objects</li>
<li>Understanding how Git stores changes is critical to gain confidence using Git</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Let's stage a file

```shell
$ echo "# My awwwesome training" > README.md
```
<!-- .element: class="fragment" -->

```shell
$ git add README.md

```
<!-- .element: class="fragment" -->
</script></section><section data-markdown><script type="text/template">
### What happened in the repository?
<!-- .element: class="fragment" -->

```shell
$ git add . && git commit -m "Add files to index"
[master 4687b81] Add files to index
 2 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 index
 create mode 100644 objects/b2/7501ade65f39bc91a5e6eb0d707903ba225a00
```
<!-- .element: class="fragment" style="font-size: 0.51em;" -->

An object was created!
<!-- .element: class="fragment" -->

<!-- .slide: data-background="./gitception_flipped.jpg" -->

<aside class="notes"><ul>
<li>Notice Xzibit in the background!</li>
<li>The name of the objects is given by their hash</li>
<li>To improve file-system usage, the objects are stored in folders</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Let's take a closer look

```shell
$ git show --name-only
commit 4687b812245e661864ea706259c36df1c688fe19
Author: Pablo Escodebar <escodebar@gmail.com>
Date:   Tue Jun 2 10:42:54 2020 +0200

    Add files to index

index
objects/b2/7501ade65f39bc91a5e6eb0d707903ba225a00
```
<!-- .element: style="font-size: 0.51em;" -->

<!-- .slide: data-background="./gitception.jpg" -->

<aside class="notes"><ul>
<li>Commiting the changes in the repository allows to inspect its behavior</li>
<li>Let&#39;s ingnore the index file for this talk</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### What's that object?

Inspect the created object
```shell
$ git cat-file -t b27501a
blob
```
<!-- .element: class="fragment" -->

```shell
$ git cat-file -p b27501a
# My awwwesome training
```
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li><code>cat-file</code> is similar to <code>show</code>, but displays the information without processing</li>
<li>Files are stored as objects of type &quot;blob&quot; (Binary Large OBject)</li>
<li>More objects are discussed later</li>
<li>Please remember, that the whole file and not only the diff is stored! (well... it depends! ðŸ˜Š)</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Now let's commit a change

```shell
$ git commit -m "Describe the training"
[master (root-commit) f836b32] Describe the training
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
```

<aside class="notes"><ul>
<li><code>root-commit</code>: This is a special one, it has no parent, well see that in a minute</li>
<li><code>f836b32</code> is part of the hash of the commit</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Time to dig deeper

The repository's content must have changed...

```shell
$ git add . && git commit -m "Commit file"
[master 1019bca] Commit file
 7 files changed, 7 insertions(+)
 create mode 100644 COMMIT_EDITMSG
 create mode 100644 logs/HEAD
 create mode 100644 logs/refs/heads/master
 create mode 100644 objects/a4/4f211c376b94d122c6429ef8e87ffa7856419d
 create mode 100644 objects/f8/36b3266cc2ef0e5cae1db426645215b980ef1a
 create mode 100644 refs/heads/master
```
<!-- .element: style="font-size: 0.51em;" class="fragment" -->

<!-- .slide: data-background="./gitception_flipped.jpg" -->

<aside class="notes"><ul>
<li>The <code>COMMIT_EDITMSG</code> is used to temporarily store the message of the commit</li>
<li>The logs keep track of the commit hashes the references pointed to, they become handy when branches are lost (more about this later)</li>
<li>There is also a log for the <code>HEAD</code> (more about the <code>HEAD</code> later)</li>
<li>References (or refs here) are discussed later - see the <code>master</code> there again?</li>
<li>One of the objects (<code>f836b32</code>) has the same hash as the previously made commit</li>
<li>...and look! An other object!</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Commit objects!

What is the object with the commit's hash?
```shell
$ git cat-file -t f836b32
commit
```
<!-- .element: class="fragment" -->
```shell
$ git cat-file -p f836b32
tree a44f211c376b94d122c6429ef8e87ffa7856419d
author Pablo Escodebar <escodebar@gmail.com> 1591087374 +0200
committer Pablo Escodebar <escodebar@gmail.com> 1591087374 +0200

Describe the training
```
<!-- .element: class="fragment" -->
...so this is what a commit looks like!
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>Git stores commits in objects as well</li>
<li>There is a reference to the tree (discussed in the next slide)</li>
<li>The author and the committer are not necessarily the same person</li>
<li>A timestamp is stored as well in the commit</li>
<li>The title and the message are stored in the commit object</li>
<li>The first commit (also called root) has no parent (more to parents later)</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Tree objects!

What is the object with the tree's hash?
```shell
$ git cat-file -t a44f211
tree
```
<!-- .element: class="fragment" -->

```shell
$ git cat-file -p a44f211
100644 blob b27501ade65f39bc91a5e6eb0d707903ba225a00	README.md
```
<!-- .element: class="fragment" style="font-size: 0.545em;" -->

...it's collection of references to objects!

<aside class="notes"><ul>
<li>The tree is an object containing references to the blobs (or other trees)</li>
<li>The tree also stores the permissions and the names of the files (but you can&#39;t set all permissions!)</li>
<li>If a file happens to be more than once in the repository, Git will save it only once, since all the trees will reference the same file</li>
</ul>
<p>By now, you know more about Git internals than many who consider themselves proficient in Git.
You will also be able to find &quot;lost&quot; files, folders and commits!</p>
</aside></script></section></section><section ><section data-markdown><script type="text/template">
## Branches

...is there enough time?
<!-- .element: class="fragment" -->
</script></section><section data-markdown><script type="text/template">
### Create a branch

```shell
$ git branch pe/new_branch

```

<aside class="notes"><ul>
<li>Prefix branches with your initials, to tell others not to touch it</li>
<li>Reference the issue in the name if the branch is related to it</li>
<li>If the branch name looks like a folder path, Git will create folders</li>
<li>To work on a branch you need to check it out (or switch to it)</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Digging again!

How are branches stored in the repository?

```shell
$ git add . && git commit -m "Add a new branch"
[master 584b3b2] Add a new branch
 2 files changed, 2 insertions(+)
 create mode 100644 logs/refs/heads/pe/new_branch
 create mode 100644 refs/heads/pe/new_branch
```
<!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>See how a further logfile was created? There is a log file for each branch!</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template">
### Let's take another close look

```shell
$ cat refs/heads/pe/new_branch
f836b3266cc2ef0e5cae1db426645215b980ef1a
```
<!-- .element: class="fragment" -->

It's just a file with a hash
<!-- .element: class="fragment" -->

...that's why creating branches is so fast!
<!-- .element: class="fragment" -->

<!-- .slide: data-background="./gitception.jpg" -->
</script></section></section><section  data-markdown><script type="text/template">
## ...and this is just the

# Beginning
</script></section><section  data-markdown><script type="text/template">
## Conclusion

<aside class="notes"><ul>
<li>Using Gitception I am able to learn how the commands I use work</li>
<li>Knowing the inner model and behavior of the commands raised my confidence</li>
<li>A series of Workshops using Gitception are going to take place at Coders Only</li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template">
## Questions & Feedback</script></section></div>
    </div>

    <script src="./js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './plugin/zoom-js/zoom.js', async: true },
        { src: './plugin/notes/notes.js', async: true },
        { src: './plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"fade"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
